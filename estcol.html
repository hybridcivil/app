<!DOCTYPE html>
<html>
<head>
  <title>Column Details</title>
  <style>
    .input-box {
      margin-bottom: 15px;
    }
    .input-box label {
      display: inline-block;
      width: 150px;
    }
    .input-box input {
      padding: 5px;
      width: 200px;
    }
    .button {
      padding: 6px 12px;
      margin-top: 10px;
    }
    table {
      border-collapse: collapse;
      width: 100%;
      margin-top: 20px;
    }
    table, th, td {
      border: 1px solid black;
    }
    th, td {
      padding: 8px;
      text-align: center;
    }
    .short-column {
      background-color: #f0f0f0;
    }
  </style>
</head>
<body>

  <div class="input-box">
    <label for="columnName">Column Name:</label>
    <input type="text" id="columnName" />
  </div>

  <div class="input-box">
    <label for="columnX">X Dimension (in):</label>
    <input type="number" id="columnX" />
  </div>

  <div class="input-box">
    <label for="columnY">Y Dimension (in):</label>
    <input type="number" id="columnY" />
  </div>

  <div class="input-box">
    <label for="columnHeight">Column Height (ft):</label>
    <input type="number" id="columnHeight" />
  </div>

  <div class="input-box">
    <label for="shortColumnHeight">Short Column Height (ft):</label>
    <input type="number" id="shortColumnHeight" placeholder="Optional" />
  </div>

  <div class="input-box">
    <label for="columnNos">No. of Columns:</label>
    <input type="number" id="columnNos" />
  </div>

  <div id="rebarContainer">
    <div class="input-box rebar-input">
      <label>Rebar:</label>
      <button type="button" onclick="addRebarField()">+</button>
      <button type="button" onclick="removeRebarField(this)">-</button>
      <input type="number" class="barDia" placeholder="Bar Size (mm)" />
      <input type="number" class="barNos" placeholder="Nos." />
    </div>
  </div>

  <button class="button" onclick="addColumn()">Add Column</button>

  <table>
    <thead>
      <tr>
        <th>Nos</th>
        <th>Column</th>
        <th>Size (in)</th>
        <th>Height (ft)</th>
        <th>Rebars</th>
      </tr>
    </thead>
    <tbody id="columnList"></tbody>
  </table>

  <script>
    function addRebarField() {
      const div = document.createElement("div");
      div.className = "input-box rebar-input";
      div.innerHTML = `
        <label>Rebar:</label>
        <button type="button" onclick="addRebarField()">+</button>
        <button type="button" onclick="removeRebarField(this)">-</button>
        <input type="number" class="barDia" placeholder="Bar Size (mm)" />
        <input type="number" class="barNos" placeholder="Nos." />
      `;
      document.getElementById("rebarContainer").appendChild(div);
    }

    function removeRebarField(button) {
      const div = button.parentNode;
      if (document.querySelectorAll(".rebar-input").length > 1) {
        div.remove();
      }
    }

    function addColumn() {
      const columnList = document.getElementById("columnList");
      const name = document.getElementById("columnName").value.trim();
      const x = parseFloat(document.getElementById("columnX").value);
      const y = parseFloat(document.getElementById("columnY").value);
      const height = parseFloat(document.getElementById("columnHeight").value);
      const shortHeight = parseFloat(document.getElementById("shortColumnHeight").value);
      const nos = parseInt(document.getElementById("columnNos").value);

      if (!name || isNaN(x) || isNaN(y) || isNaN(height) || isNaN(nos)) {
        alert("Please fill all required fields correctly.");
        return;
      }

      const adjustedX = x + 3;
      const adjustedY = y + 3;

      const rebars = Array.from(document.querySelectorAll(".rebar-input")).map(rebar => {
        const dia = rebar.querySelector(".barDia").value;
        const n = rebar.querySelector(".barNos").value;
        return `${n} bars of ${dia}mm`;
      }).join("<br>");

      const row = document.createElement("tr");
      row.innerHTML = `
        <td>${nos}</td>
        <td>${name}</td>
        <td>${adjustedX}x${adjustedY}</td>
        <td>${height}</td>
        <td>${rebars}</td>
      `;
      columnList.appendChild(row);

      if (!isNaN(shortHeight) && shortHeight > 0) {
        const rowShort = document.createElement("tr");
        rowShort.classList.add("short-column");
        rowShort.innerHTML = `
          <td>${nos}</td>
          <td>${name}s</td>
          <td>${adjustedX}x${adjustedY}</td>
          <td>${shortHeight}</td>
          <td>${rebars}</td>
        `;
        columnList.appendChild(rowShort);
      }

      // Reset inputs
      document.getElementById("columnName").value = "";
      document.getElementById("columnX").value = "";
      document.getElementById("columnY").value = "";
      document.getElementById("columnHeight").value = "";
      document.getElementById("shortColumnHeight").value = "";
      document.getElementById("columnNos").value = "";
      document.getElementById("rebarContainer").innerHTML = `
        <div class="input-box rebar-input">
          <label>Rebar:</label>
          <button type="button" onclick="addRebarField()">+</button>
          <button type="button" onclick="removeRebarField(this)">-</button>
          <input type="number" class="barDia" placeholder="Bar Size (mm)" />
          <input type="number" class="barNos" placeholder="Nos." />
        </div>
      `;
    }
  </script>
</body>
</html>
